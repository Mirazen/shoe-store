# Интернет-магазин обуви

Учебный проект интернет-магазина на Django с системой аутентификации, каталогом товаров, корзиной и управлением заказами

## Архитектура приложения

### Приложение `products`

#### Модели:
- `Product` — основная информация о товаре (артикул, название, цена, описание, изображение)
- `Provider` — справочник поставщиков
- `Manufacturer` — справочник производителей
- `Category` — справочник категорий товаров

#### Формы:
- `ProductForm` — форма для создания/редактирования товара (для администратора)
- `ProductFilterForm` — форма для фильтрации, поиска и сортировки товаров

#### Представления:
- `catalog` — отображение каталога товаров (с фильтрами для менеджера и администратора)
- `add_to_cart` — добавление товара в корзину
- `ProductCreateView` — создание товара (только администратор)
- `ProductUpdateView` — редактирование товара (только администратор)
- `ProductDeleteView` — удаление товара (только администратор)

#### Шаблоны:
- `catalog.html` — страница каталога товаров с фильтрами и подсветкой скидок/остатков
- `add_to_cart.html` — страница добавления товара в корзину
- `product_form.html` — форма создания/редактирования товара
- `product_confirm_delete.html` — подтверждение удаления товара

### Приложение `cart`
Содержит модели и логику для работы с корзиной:

#### Модели:
- `Cart` — корзина пользователя (привязана к пользователю)
- `CartItem` — элемент корзины (товар и количество)

#### Представления:
- `view_cart` — отображение содержимого корзины
- `remove_from_cart` — удаление товара из корзины

#### Шаблоны:
- `cart.html` — страница корзины

### Приложение `accounts`
Содержит логику аутентификации и профиля пользователя:

#### Модели:
- `CustomUser` — кастомная модель пользователя с ролями (гость, клиент, менеджер, администратор)

#### Представления:
- `profile` — страница профиля пользователя
- `RegisterView` — регистрация нового пользователя
- `guest_login` — вход без авторизации (режим гостя)

#### Менеджеры команд:
- `import_users` — импорт пользователей из CSV файла

#### Шаблоны:
- `profile.html` — страница профиля пользователя
- `login.html` — страница входа в систему

### Приложение `orders`
Управление заказами:

#### Модели:
- `Order` — заказ (номер, даты, клиент, пункт выдачи, статус)
- `OrderItem` — позиция заказа (товар и количество)
- `PickupPoint` — пункт выдачи заказов

#### Формы:
- `OrderForm` — форма для создания/редактирования заказа (для администратора)

#### Представления:
- `order_list` — просмотр списка заказов (менеджер и администратор)
- `OrderCreateView` — создание заказа (только администратор)
- `OrderUpdateView` — редактирование заказа (только администратор)
- `OrderDeleteView` — удаление заказа (только администратор)

#### Менеджеры команд:
- `import_pickup_points` — импорт пунктов выдачи из CSV
- `import_orders` — импорт заказов из CSV

#### Шаблоны:
- `order_list.html` — страница списка заказов
- `order_form.html` — форма создания/редактирования заказа
- `order_delete_confirm.html` — подтверждение удаления заказа

## Технологический стек
- **Python**: `>=3.11`
- **Framework**: Django 5.2.10
- **Images**: Pillow
- **Linting**: Ruff
- **Package Manager**: uv (рекомендуется)

## Установка и запуск

### Способ 1: через uv
1. Клонируйте репозиторий
```bash
git clone https://github.com/Mirazen/shoe-store.git
cd shoe-store
```

2. Установите зависимости (создаст .venv автоматически)
```bash
uv sync
```

3. Выполните миграции и создайте админа
```bash
uv run manage.py makemigrations
uv run manage.py migrate
uv run manage.py createsuperuser
```

4. Импортируйте данные из CSV файлов
```bash
uv run manage.py import_csv
uv run manage.py import_users
uv run manage.py import_pickup_points
uv run manage.py import_orders
```

5. Запустите сервер
```bash
uv run manage.py runserver
```

### Способ 2: через pip
1. Клонируйте репозиторий
```bash
git clone https://github.com/Mirazen/shoe-store.git
cd shoe-store
```

2. Создайте виртуальное окружение
```bash
python -m venv venv
```

3. Активируйте его
```bash
# Linux/Mac:
source venv/bin/activate
# Windows:
venv\Scripts\activate
```

4. Установите зависимости
```bash
pip install -r requirements.txt
```

5. Выполните миграции и создайте админа
```bash
python manage.py makemigrations
python manage.py migrate
python manage.py createsuperuser
```

6. Импортируйте данные из CSV файлов
```bash
python manage.py import_csv
python manage.py import_users
python manage.py import_pickup_points
python manage.py import_orders
```

7. Запустите сервер
```bash
python manage.py runserver
```

## Особенности реализации

### Роли пользователей:
- **Гость** — просмотр каталога товаров (без фильтрации, сортировки, поиска)
- **Авторизованный клиент** — просмотр каталога, добавление товаров в корзину
- **Менеджер** — просмотр каталога с фильтрацией/сортировкой/поиском, просмотр заказов
- **Администратор** — полный доступ (CRUD товаров и заказов, управление пользователями)

### Функционал каталога:
- Подсветка товаров со скидкой >15% (зелёный фон #2E8B57)
- Подсветка отсутствующих товаров (голубой фон)
- Отображение старой цены (зачёркнутая, красная) и новой цены (чёрная)
- Фильтрация по категории, производителю, поставщику, цене
- Поиск по названию и описанию
- Сортировка по названию, цене, скидке

### Импорт данных:
- Импорт товаров из `data/Tovar.csv`
- Импорт пользователей из `data/user_import.csv`
- Импорт пунктов выдачи из `data/Пункты выдачи_import.csv`
- Импорт заказов из `data/Заказ_import.csv`

### Хранение файлов:
- Статические файлы (CSS, заглушки): `static/`
- Загруженные изображения товаров: `media/products/`
